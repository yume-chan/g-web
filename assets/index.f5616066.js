import{_ as l,a as W,b as R,P,E as C}from"./vendor.241a3de2.js";const K=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}};K();class G{constructor(n){this.hidpp=n}getSensorCount(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(8705),r=yield this.hidpp.sendLongRequest(n,0);return new Uint8Array(r)[0]})}getDpiList(n){return l(this,void 0,void 0,function*(){if(yield this.hidpp.getVersion(),this.hidpp.version===1)throw new Error("Not Implemented");{const{index:r}=yield this.hidpp.getFeature(8705),o=yield this.hidpp.sendLongRequest(r,1,new Uint8Array([n]).buffer),t=new DataView(o);let i=[],s;for(let a=1;a<=1+14;a+=2){const d=t.getUint16(a);if(d===0)break;if(d>>13==7){s=d&8191;continue}i.push(d)}if(s){const a=[];for(let d=i[0];d<=i[1];d+=s)a.push(d);return a}else return i}})}getDpi(n){return l(this,void 0,void 0,function*(){if(yield this.hidpp.getVersion(),this.hidpp.version===1)throw new Error("Not Implemented");{const{index:r}=yield this.hidpp.getFeature(8705),o=yield this.hidpp.sendLongRequest(r,2,new Uint8Array([n]).buffer);return new DataView(o).getUint16(1)}})}setDpi(n,r){return l(this,void 0,void 0,function*(){if(yield this.hidpp.getVersion(),this.hidpp.version===1)throw new Error("Not Implemented");{const{index:o}=yield this.hidpp.getFeature(8705),t=new ArrayBuffer(3);let i=new DataView(t);i.setUint8(0,n),i.setUint16(1,r);const s=yield this.hidpp.sendLongRequest(o,3,t);return i=new DataView(s),i.getUint16(1)}})}}var U;(function(e){e[e.Discharging=0]="Discharging",e[e.Charging=1]="Charging",e[e.AlmostFull=2]="AlmostFull",e[e.Charged=3]="Charged",e[e.SlowRecharge=4]="SlowRecharge",e[e.InvalidBattery=5]="InvalidBattery",e[e.TerminalError=6]="TerminalError",e[e.OtherError=7]="OtherError"})(U||(U={}));var A;(function(e){e[e.FastCharging=8]="FastCharging",e[e.SlowCharging=16]="SlowCharging",e[e.LevelCritical=32]="LevelCritical",e[e.Charging=128]="Charging"})(A||(A={}));var S;(function(e){e[e.Critical=1]="Critical",e[e.Low=2]="Low",e[e.Good=4]="Good",e[e.Full=8]="Full"})(S||(S={}));var F;(function(e){e[e.Discharging=1]="Discharging",e[e.Charging=3]="Charging",e[e.ChargingComplete=7]="ChargingComplete",e[e.ChargingFault=11]="ChargingFault"})(F||(F={}));class w{constructor(n){this.hidpp=n}static mapVoltageToSoc(n){const r=[4186,4156,4143,4133,4122,4113,4103,4094,4086,4075,4067,4059,4051,4043,4035,4027,4019,4011,4003,3997,3989,3983,3976,3969,3961,3955,3949,3942,3935,3929,3922,3916,3909,3902,3896,3890,3883,3877,3870,3865,3859,3853,3848,3842,3837,3833,3828,3824,3819,3815,3811,3808,3804,3800,3797,3793,3790,3787,3784,3781,3778,3775,3772,3770,3767,3764,3762,3759,3757,3754,3751,3748,3744,3741,3737,3734,3730,3726,3724,3720,3717,3714,3710,3706,3702,3697,3693,3688,3683,3677,3671,3666,3662,3658,3654,3646,3633,3612,3579,3537];for(let o=0;o<r.length;o+=1)if(n>r[o])return r.length-o;return 0}getBattery1000(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(4096),r=yield this.hidpp.sendLongRequest(n,0),o=new Uint8Array(r);return{level:o[0],nextLevel:o[1],status:o[2]}})}getBattery1001(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(4097),r=yield this.hidpp.sendLongRequest(n,0),o=new DataView(r);return{voltage:o.getUint16(0),status:o.getUint8(2)}})}getBattery1004(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(4100),r=yield this.hidpp.sendLongRequest(n,1),o=new DataView(r);return{percentage:o.getUint8(0),level:o.getUint8(1),status:o.getUint8(2)}})}getBattery1f20(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(7968),r=yield this.hidpp.sendLongRequest(n,0),o=new DataView(r),t=o.getUint16(0),i=o.getUint8(2);return{voltage:t,status:i}})}}class z{constructor(n){this.hidpp=n}getFeatureCount(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(1),r=yield this.hidpp.sendLongRequest(n,0);return new Uint8Array(r)[0]})}getFeatures(){return W(this,arguments,function*(){const r=yield R(this.getFeatureCount()),{index:o}=yield R(this.hidpp.getFeature(1));for(let t=0;t<=r;t+=1){const i=yield R(this.hidpp.sendLongRequest(o,1,new Uint8Array([t]).buffer)),s=new DataView(i),a=s.getUint16(0),d=s.getUint8(2);yield yield R({id:a,obsolete:(d&1<<7)!=0,hidden:(d&1<<6)!=0,internal:(d&1<<5)!=0})}})}}const V=new TextDecoder;var m;(function(e){e[e.Firmware=0]="Firmware",e[e.Bootloader=1]="Bootloader",e[e.Hardware=2]="Hardware",e[e.TouchPad=3]="TouchPad",e[e.OpticalSensor=4]="OpticalSensor",e[e.SoftDevice=5]="SoftDevice",e[e.RfMcu=6]="RfMcu",e[e.FactoryApplication=7]="FactoryApplication",e[e.RgbCustomEffect=8]="RgbCustomEffect",e[e.MotorDrive=9]="MotorDrive"})(m||(m={}));var k;(function(e){e[e.Bluetooth=1]="Bluetooth",e[e.BluetoothLE=2]="BluetoothLE",e[e.EQuad=4]="EQuad",e[e.USB=8]="USB"})(k||(k={}));class J{constructor(n){this.hidpp=n}getDeviceInfo(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(3),r=yield this.hidpp.sendLongRequest(n,0),o=new DataView(r),t=o.getUint8(0),i=o.getUint32(1),s=o.getUint16(5),a=[];for(let g=0;g<16;g+=1)(s&1<<g)!=0&&a.push(1<<g);const d=[o.getUint16(7),o.getUint16(9),o.getUint16(11)],c=o.getUint8(13),u=(o.getUint8(14)&1)==1;return{entityCount:t,unitId:i,transports:a,modelId:d,extendedModelId:c,supportSerialNumber:u}})}getFirmwareInfo(n){return l(this,void 0,void 0,function*(){const{index:r}=yield this.hidpp.getFeature(3),o=yield this.hidpp.sendLongRequest(r,1,new Uint8Array([n]).buffer),t=new DataView(o),i=t.getUint8(0)&15;switch(i){case m.Firmware:case m.Bootloader:{const s=V.decode(o.slice(1,4)),a=t.getUint8(4),d=t.getUint8(5),c=t.getUint16(6),h=t.getUint8(8),u=t.getUint16(9);return{type:i,name:s,major:a,minor:d,build:c,active:(h&1)==1,pid:u}}case m.Hardware:return{type:i,name:"",major:t.getUint8(1),minor:0,build:0,active:!1,pid:0};default:return{type:i,name:"",major:0,minor:0,build:0,active:!1,pid:0}}})}getSerialNumber(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(3),r=yield this.hidpp.sendLongRequest(n,2);return console.error(r),V.decode(r.slice(0,12))})}}new TextDecoder;class Q{constructor(n=!1){this.list=[],this.blocking=n}wait(){if(!this.blocking&&(this.blocking=!0,this.list.length===0))return Promise.resolve();const n=new P;return this.list.push(n),n.promise}notify(){this.list.length!==0?this.list.pop().resolve():this.blocking=!1}dispose(){for(const n of this.list)n.reject(new Error("The Mutex has been disposed"));this.list.length=0}}const X=!0,Y={vendorId:1133};var v;(function(e){e[e.Success=0]="Success",e[e.InvalidCommand=1]="InvalidCommand",e[e.InvalidAddress=2]="InvalidAddress",e[e.InvalidValue=3]="InvalidValue",e[e.ConnectFail=4]="ConnectFail",e[e.TooManyDevices=5]="TooManyDevices",e[e.AlreadyExists=6]="AlreadyExists",e[e.Busy=7]="Busy",e[e.UnknownDevice=8]="UnknownDevice",e[e.ResourceError=9]="ResourceError",e[e.RequestUnavailable=10]="RequestUnavailable",e[e.InvalidParamValue=11]="InvalidParamValue",e[e.WrongPinCode=12]="WrongPinCode"})(v||(v={}));const M={[v.Success]:"No error",[v.InvalidCommand]:"Invalid command",[v.InvalidAddress]:"Invalid address",[v.InvalidValue]:"Invalid value",[v.ConnectFail]:"Connection request failed (Receiver)",[v.TooManyDevices]:"Too many devices connected (Receiver)",[v.AlreadyExists]:"Already exists (Receiver)",[v.Busy]:"Busy (Receiver)",[v.UnknownDevice]:"Unknown device (Receiver)",[v.ResourceError]:"Resource error (Receiver)",[v.RequestUnavailable]:"Request not valid in current context",[v.InvalidParamValue]:"Request parameter has unsupported value",[v.WrongPinCode]:"The PIN code entered on the device was wrong"};var x;(function(e){e[e.InvalidArgument=2]="InvalidArgument",e[e.OutOfRange=3]="OutOfRange",e[e.HardwareError=4]="HardwareError",e[e.LogitechInternal=5]="LogitechInternal",e[e.InvalidFeatureIndex=6]="InvalidFeatureIndex",e[e.InvalidFunction=7]="InvalidFunction",e[e.Busy=8]="Busy",e[e.Unsupported=9]="Unsupported"})(x||(x={}));const N={[x.InvalidArgument]:"Invalid Argument",[x.OutOfRange]:"Out of Range",[x.HardwareError]:"Hardware Error",[x.LogitechInternal]:"Internal Error",[x.InvalidFeatureIndex]:"Invalid Feature Index",[x.InvalidFunction]:"Invalid Function",[x.Busy]:"Device Busy",[x.Unsupported]:"Unsupported"};function Z(...e){let n=0;for(const t of e)t&&(n+=t.byteLength);const r=new Uint8Array(n);let o=0;for(const t of e)t&&(r.set(new Uint8Array(t),o),o+=t.byteLength);return r.buffer}class _{constructor(n,r,o){if(this.disconnectEvent=new C,this.onDisconnect=this.disconnectEvent.event,this._mutex=new Q,this._featureIdToIndex={},this.handleRawInputReport=({reportId:t,data:i})=>{t===16||t===17?this.handleInputReport(i):console.log(`raw input message 0x${t.toString(16)}`,Array.from(new Uint8Array(i.buffer)))},this.handleInputReport=t=>{var i,s;const a=new Uint8Array(t.buffer),d=a[0];{const g=a[1],f=a[2],p=t.buffer.slice(3);console.log(`input message ${d} 0x${g.toString(16).padStart(2,"0")} 0x${f.toString(16).padStart(2,"0")}`,Array.from(new Uint8Array(p)))}if(d!==this.index)return;const c=this._request;if(!c)return;let h=a[1];if(h===143){h=a[2];const g=a[3];if(c.command===h&&c.address===g){const f=a[4];console.error(`error ${h.toString(16)} ${g.toString(16)} ${M[f]}`);const p=new Error((i=M[f])!==null&&i!==void 0?i:"Hidpp 1 Error");p.name="Hidpp1Error",p.code=f,c.resolver.reject(p),this._request=void 0}return}else if(h===255){h=a[2];const g=a[3];if(c.command===h&&c.address===g){const f=a[4];console.error(`error ${h.toString(16)} ${g.toString(16)} ${N[f]}`);const p=new Error((s=N[f])!==null&&s!==void 0?s:"Hidpp 2 Error");p.name="Hidpp2Error",p.code=f,c.resolver.reject(p),this._request=void 0}}const u=a[2];if(c.command===h&&c.address===u){const g=t.buffer.slice(3);console.log(`response ${d} 0x${h.toString(16)} 0x${(this.version===2?u>>4:u).toString(16)}`,Array.from(new Uint8Array(g))),c.resolver.resolve(g),this._request=void 0}},this.device=n,this.index=r,this.receiver=o,this.index===255&&this.device.addEventListener("inputreport",this.handleRawInputReport),this.receiver){this._mutex=this.receiver.hidpp._mutex;const t=this.receiver.onChildDisconnect(i=>{i===this&&(this.disconnectEvent.fire(),t())})}}sendPacket(n,r,o){if(o.byteLength<r){const t=new ArrayBuffer(r);new Uint8Array(t).set(new Uint8Array(o),0),o=t}return this.device.sendReport(n,o)}getVersion(){return l(this,void 0,void 0,function*(){if(this.version)return;if(this.device.opened||(yield this.device.open()),!this.device.collections.some(r=>{var o;return(o=r.outputReports)===null||o===void 0?void 0:o.some(t=>t.reportId===17)})){this.version=1;return}try{this.version=2,yield this.sendLongRequest(0,1)}catch(r){if(r instanceof Error&&r.name==="Hidpp1Error"&&r.code===v.InvalidCommand)this.version=1;else throw r}})}getFeature(n){return l(this,void 0,void 0,function*(){if(yield this.getVersion(),this.version===1)throw new Error("Feature not supported in HID++ 1.0");if(this._featureIdToIndex[n])return this._featureIdToIndex[n];const r=new ArrayBuffer(2);new DataView(r).setUint16(0,n);const o=yield this.sendLongRequest(0,0,r),t=new Uint8Array(o),i=t[0];if(i===0)throw new Error("Feature not supported");const s=t[2];return this._featureIdToIndex[n]={index:i,version:s},{index:i,version:s}})}sendRequest(n,r,o,t,i){return l(this,void 0,void 0,function*(){if(!this.version)throw new Error("Unknown device version");yield this._mutex.wait();try{this.device.opened||(yield this.device.open()),X&&console.log(`request 0x${o.toString(16)} 0x${t.toString(16)}`,i?Array.from(new Uint8Array(i)):""),this.version===2&&(t=t<<4);const s=new P;return this._request={command:o,address:t,resolver:s},yield this.sendPacket(n,3+r,Z(new Uint8Array([this.index,o,t]).buffer,i)),yield s.promise}finally{this._mutex.notify()}})}sendShortRequest(n,r,o){return this.sendRequest(16,3,n,r,o)}sendLongRequest(n,r,o){return this.sendRequest(17,16,n,r,o)}}function B(e){return e.collections.some(n=>n.usagePage===65347||n.usagePage===65280)}function H(){return l(this,void 0,void 0,function*(){const e=yield window.navigator.hid.requestDevice({filters:[Y]});if(e.length===0)throw new Error("No device selected");const n=e.find(B);if(!n)throw new Error("Device not recognized");return n})}var D;(function(e){e[e.NoChange=0]="NoChange",e[e.OnBoard=1]="OnBoard",e[e.Host=2]="Host"})(D||(D={}));class T{constructor(n){this.hidpp=n}getInfo(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(33024),r=yield this.hidpp.sendLongRequest(n,0),o=new DataView(r);return{memoryModelId:o.getUint8(0),profileFormatId:o.getUint8(1),macroFormatId:o.getUint8(2),profileCount:o.getUint8(3),profileCountOob:o.getUint8(4),buttonCount:o.getUint8(5),sectorCount:o.getUint8(6),sectorSize:o.getUint16(7),mechanicalLayout:o.getUint8(9),variousInfo:o.getUint8(10)}})}setMode(n){return l(this,void 0,void 0,function*(){const{index:r}=yield this.hidpp.getFeature(33024);yield this.hidpp.sendLongRequest(r,1,new Uint8Array([n]).buffer)})}getMode(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(33024),r=yield this.hidpp.sendLongRequest(n,2);return new Uint8Array(r)[0]})}getCurrentProfile(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(33024),r=yield this.hidpp.sendLongRequest(n,4);return new Uint8Array(r)[0]})}readSector(n,r){return l(this,void 0,void 0,function*(){const{index:o}=yield this.hidpp.getFeature(33024),t=new ArrayBuffer(4),i=new DataView(t);i.setUint16(0,n);const s=new Uint8Array(r);for(let a=0;a<r;a+=16){a=Math.min(a,r-16),i.setUint16(2,a);{const d=yield this.hidpp.sendLongRequest(o,5,t),c=new Uint8Array(d);s.set(c,a)}}return s.buffer})}getProfilesInfo(){return l(this,void 0,void 0,function*(){const{profileCount:n,sectorSize:r}=yield this.getInfo(),o=yield this.readSector(0,r),t=new DataView(o),i=[];for(let s=0;s<n;s++){const a={address:t.getUint16(s*4),enabled:t.getUint8(s*4+2)===1};i.push(a)}return i})}readProfile(n){return l(this,void 0,void 0,function*(){const{sectorSize:r}=yield this.getInfo(),o=yield this.readSector(n,r),t=new DataView(o);return{reportRate:t.getUint8(0),defaultDpi:t.getUint8(1),switchedDpi:t.getUint8(2),dpi:(()=>{const i=[];for(let s=0;s<5;s+=1)i.push(t.getUint16(3+s*2,!0));return i})(),color:{r:t.getUint8(11),g:t.getUint8(12),b:t.getUint8(13)},powerMode:t.getUint8(14),angleSnapping:t.getUint8(15),powerSaveTimeout:t.getUint8(26),powerOffTimeout:t.getUint8(27)}})}getCurrentDpiIndex(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(33024),r=yield this.hidpp.sendLongRequest(n,11);return new Uint8Array(r)[0]})}}class ee{constructor(n){this.children=[],this.childConnectEvent=new C,this.onChildConnect=this.childConnectEvent.event,this.childDisconnectEvent=new C,this.onChildDisconnect=this.childDisconnectEvent.event,this.handleInputReport=({reportId:r,data:o})=>{var t;if(r===16||r===17){const i=new Uint8Array(o.buffer),s=i[0];if(s!==255){if(i[1]===65){(i[3]&1<<6)==0?this.children[s]||this.childConnectEvent.fire(this.getChild(s)):this.children[s]&&(this.childDisconnectEvent.fire(this.getChild(s)),delete this.children[s]);return}(t=this.children[s])===null||t===void 0||t.handleInputReport(o)}else{const a=i[1],d=i[2],c=o.buffer.slice(3);console.log(`input message ${s} 0x${a.toString(16).padStart(2,"0")} 0x${d.toString(16).padStart(2,"0")}`,Array.from(new Uint8Array(c)))}}else console.log(`raw input message 0x${r.toString(16)}`,Array.from(new Uint8Array(o.buffer)))},this.hidpp=n,this.hidpp.device.addEventListener("inputreport",this.handleInputReport)}getChildCount(){return l(this,void 0,void 0,function*(){if(yield this.hidpp.getVersion(),this.hidpp.version!==1)throw new Error("Unsupported version");const n=yield this.hidpp.sendShortRequest(129,2);return new Uint8Array(n)[1]})}detectChildren(){return l(this,void 0,void 0,function*(){yield this.hidpp.sendShortRequest(128,0,new Uint8Array([0,1,0]).buffer),yield this.hidpp.sendShortRequest(128,2,new Uint8Array([2]).buffer)})}getChild(n){return this.children[n]||(this.children[n]=new _(this.hidpp.device,n,this)),this.children[n]}}class te{constructor(n){this.hidpp=n}getReportRateList(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(32864),r=yield this.hidpp.sendLongRequest(n,0),t=new Uint8Array(r)[0],i=[];for(let s=0;s<8;s+=1)t&1<<s&&i.push(s+1);return i})}getReportRate(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(32864),r=yield this.hidpp.sendLongRequest(n,1);return new Uint8Array(r)[0]})}setReportRate(n){return l(this,void 0,void 0,function*(){const{index:r}=yield this.hidpp.getFeature(32864);yield this.hidpp.sendLongRequest(r,2,new Uint8Array([n]))})}}const ne=new TextDecoder;var L;(function(e){e[e.Keyboard=0]="Keyboard",e[e.RemoteControl=1]="RemoteControl",e[e.Numpad=2]="Numpad",e[e.Mouse=3]="Mouse",e[e.TrackPad=4]="TrackPad",e[e.Trackball=5]="Trackball",e[e.Presenter=6]="Presenter",e[e.Receiver=7]="Receiver",e[e.Headset=8]="Headset",e[e.Webcam=9]="Webcam",e[e.SteeringWheel=10]="SteeringWheel",e[e.Joystick=11]="Joystick",e[e.Gamepad=12]="Gamepad",e[e.Dock=13]="Dock",e[e.Speaker=14]="Speaker",e[e.Microphone=15]="Microphone"})(L||(L={}));class ie{constructor(n){this.hidpp=n}getNameLength(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(5),r=yield this.hidpp.sendLongRequest(n,0);return new Uint8Array(r)[0]})}getName(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(5),r=yield this.getNameLength();let o=new Uint8Array(r);for(let t=0;t<r;t+=16){const i=yield this.hidpp.sendLongRequest(n,1,new Uint8Array([t]).buffer);o.set(new Uint8Array(i,0,Math.min(r-t,16)),t)}return ne.decode(o)})}getType(){return l(this,void 0,void 0,function*(){const{index:n}=yield this.hidpp.getFeature(5),r=yield this.hidpp.sendLongRequest(n,2);return new Uint8Array(r)[0]})}}const oe=document.getElementById("root"),E=[];async function O(e){var r,o;if(await e.getVersion(),console.log(e),e.version===1){const t=new ee(e);console.log(t),t.onChildConnect(s=>O(s)),await t.detectChildren();const i=await t.getChildCount();console.log("childrenCount",i);return}const n=document.createElement("div");oe.appendChild(n),e.onDisconnect(()=>{n.remove()});try{const t=new ie(e);let i=document.createElement("div");i.textContent=`${e.index} - ${await t.getName()}`,n.appendChild(i),i=document.createElement("div"),i.textContent=`Type: ${L[await t.getType()]}`,n.appendChild(i)}catch(t){console.log(t)}try{const t=new z(e),i=document.createElement("div");i.textContent="Features: ";let s=0;for await(const a of t.getFeatures()){const d=`0x${a.id.toString(16).padStart(4,"0")}`,c=document.createElement("div"),h={"0x0000":"Root","0x0001":"Feature Set","0x0002":"Feature Info","0x0003":"Firmware Info","0x0004":"Device Unit ID","0x0005":"Device Name","0x0006":"Device Groups","0x0007":"Device Friendly Name","0x0008":"Keep Alive","0x0020":"Config Change","0x0021":"Crypto ID","0x0040":"Target Software","0x0080":"Wireless Signal Strength","0x00c0":"DFU Control v0","0x00c1":"DFU Control v1","0x00c2":"DFU Control v2","0x00d0":"DFU","0x1000":"Battery v0","0x1001":"Battery v1","0x1004":"Battery v4","0x1010":"Charging Control","0x1300":"LED Control","0x1800":"Generic Test","0x1802":"Device Reset","0x1805":"OOB State","0x1806":"Configurable Device Properties","0x1014":"Change Host","0x1015":"Hosts Info","0x1981":"Keyboard Backlight v1","0x1982":"Keyboard Backlight v2","0x1983":"Keyboard Backlight v3","0x1a00":"Presenter Control","0x1b00":"Reprogrammable Control v0","0x1b01":"Reprogrammable Control v1","0x1b02":"Reprogrammable Control v2","0x1b03":"Reprogrammable Control v3","0x1b04":"Reprogrammable Control v4","0x1bc0":"Report HID Usages","0x1c00":"Persistent Remappable Action","0x1d4b":"Wireless Status","0x1df0":"Remaining Pairing","0x1e00":"Enable Hidden Features","0x1f1f":"Firmware Properties","0x1f20":"ADC Measurement","0x2001":"Button Swap","0x2005":"Button Swap Cancel","0x2006":"Pointer Axis Orientation","0x2100":"Vertical Scrolling","0x2110":"Smart Shift v0","0x2111":"Smart Shift v1","0x2120":"Hi-Res Wheel v0","0x2121":"Hi-Res Wheel v1","0x2130":"Ratchet Wheel","0x2150":"Thumb Wheel","0x2200":"Mouse Pointer","0x2201":"Adjustable DPI","0x2205":"Pointer Motion Scaling","0x2230":"Angle Snapping","0x2240":"Surface Tuning","0x2250":"XY Stats","0x2251":"Wheel Stats","0x2400":"Hybrid Tracking","0x40a0":"Fn Inversion v0","0x40a2":"Fn Inversion v2","0x40a3":"Fn Inversion v3","0x4100":"Encryption","0x4220":"Lock Key State","0x4301":"Solar Dashboard","0x4520":"Keyboard Layout","0x4521":"Disable Keys","0x4522":"Disable Keys By Usage","0x4530":"Dual Platform","0x4531":"Multi Platform","0x4540":"Keyboard Layout 2","0x4600":"Crown","0x6010":"TouchPad Firmware Items","0x6011":"TouchPad Software Items","0x6012":"TouchPad Windows 8 Firmware Items","0x6020":"Tap Enabled v0","0x6021":"Tap Enabled v1","0x6030":"Cursor Ballistic","0x6040":"TouchPad Resolution","0x6100":"TouchPad Raw XY","0x6110":"Touch Mouse Raw Points","0x6500":"TouchPad Gestures v0","0x6501":"TouchPad Gestures v1","0x8010":"G-key","0x8040":"Brightness Control","0x8060":"Adjustable Report Rate","0x8070":"Color LED Effects","0x8071":"RGB Effects","0x8080":"Per Key Lighting v0","0x8081":"Per Key Lighting v1","0x8090":"Mode Status","0x8100":"On-board Profiles","0x8110":"Mouse Button Spy","0x8111":"Latency Monitoring","0x8120":"Gaming Attachments","0x8123":"Force Feedback","0x8300":"Side Tone","0x8310":"Equalizer","0x8320":"Headset Out"},u=[];a.obsolete&&u.push("obsolete"),a.hidden&&u.push("hidden"),a.internal&&u.push("internal"),c.textContent=`Feature 0x${s.toString(16)}: ${d}${h[d]?` ${h[d]}`:""}${u.length?` (${u.join(", ")})`:""}`,n.appendChild(c),s+=1}}catch(t){console.log(t)}try{const t=new J(e),i=await t.getDeviceInfo();console.error(i);for(let d=0;d<i.entityCount;d+=1){const c=await t.getFirmwareInfo(d),h=document.createElement("div");h.textContent=[`Firmware ${d}:`,(r=m[c.type])!=null?r:"Unknown",c.name,`${c.major.toString(16)}.${c.minor.toString(16)}.${c.build.toString(16)}`,c.active?" (active)":"",c.pid?` pid=${c.pid.toString(16).padStart(2,"0")}`:""].filter(Boolean).join(" "),n.appendChild(h)}let s=i.unitId.toString(16).padStart(8,"0");i.supportSerialNumber&&(s=await t.getSerialNumber());const a=document.createElement("div");a.textContent=`Serial Number: ${s}`,n.appendChild(a)}catch(t){console.error(t)}try{const t=new w(e),{level:i,nextLevel:s,status:a}=await t.getBattery1000();console.log("battery",i,s,a);const d=document.createElement("div");d.textContent=`Battery: about ${i}%, ${U[a]}`,n.appendChild(d)}catch(t){console.log(t)}try{const t=new w(e),{voltage:i,status:s}=await t.getBattery1001();console.log("battery",i,s);const a=document.createElement("div");a.textContent=`Battery: ${i}mV (~${w.mapVoltageToSoc(i)}%), ${(o=A[s])!=null?o:"Discharging"}`,n.appendChild(a)}catch(t){console.log(t)}try{const t=new w(e),{percentage:i,level:s,status:a}=await t.getBattery1004();console.log("battery",i,s,a);const d=document.createElement("div");d.textContent=`Battery: ${i?`${i}%`:S[s]}, ${U[a]}`,n.appendChild(d)}catch(t){console.log(t)}try{const t=new w(e),{voltage:i,status:s}=await t.getBattery1f20(),a=document.createElement("div");a.textContent=`Battery: ${i}mV (~${w.mapVoltageToSoc(i)}%), ${F[s]}`,n.appendChild(a)}catch(t){console.log(t)}try{const t=new G(e),i=await t.getSensorCount();for(let s=0;s<i;s+=1){const a=s,d=await t.getDpiList(a),c=await t.getDpi(a),h=document.createElement("div");h.textContent=`Sensor ${a} DPI: `;const u=document.createElement("select");for(const g of d){const f=document.createElement("option");f.value=g.toString(),f.innerText=g.toString(),u.appendChild(f)}u.value=c.toString(),u.onchange=async()=>{console.log(u.value),await t.setDpi(a,parseInt(u.value,10))},h.appendChild(u),n.appendChild(h)}}catch(t){console.log(t)}try{const t=new te(e),i=await t.getReportRateList(),s=await t.getReportRate(),a=document.createElement("div");a.textContent="Report Rate: ";const d=document.createElement("select");for(const c of i){const h=document.createElement("option");h.value=c.toString(),h.innerText=`${c}ms`,d.appendChild(h)}d.value=s.toString(),d.onchange=async()=>{console.log(d.value),await t.setReportRate(parseInt(d.value,10))},a.appendChild(d),n.appendChild(a)}catch(t){console.log(t)}try{const t=new T(e),i=await t.getMode(),s=document.createElement("details"),a=document.createElement("summary");a.textContent="On Board Profile Mode: ";const d=document.createElement("select");for(const u of[1,2]){const g=document.createElement("option");g.value=u.toString(),g.textContent=D[u],d.appendChild(g)}d.value=i.toString(),d.onchange=async()=>{await t.setMode(parseInt(d.value,10))},a.appendChild(d),s.appendChild(a);const c=await t.getCurrentProfile(),h=await t.getProfilesInfo();for(const u of h){const g=document.createElement("details"),f=document.createElement("summary");if(f.textContent=`Profile ${u.address} (${u.enabled?"Enabled":"Disabled"}${u.address===c+1?", Active":""})`,g.appendChild(f),u.enabled){const p=await t.readProfile(u.address);console.log("profile",u.address,p);const $=document.createElement("div");$.textContent=`Report Rate: ${p.reportRate}ms`,g.appendChild($);const q=document.createElement("div");if(q.textContent=`DPI List: ${p.dpi.filter(Boolean).map((b,y)=>{const I=[];return y===p.defaultDpi&&I.push("default"),y===p.switchedDpi&&I.push("switched"),`${b}${I.length?` (${I.join(", ")})`:""}`}).join(", ")}`,g.appendChild(q),u.address===c+1){const b=await t.getCurrentDpiIndex(),y=document.createElement("div");y.textContent=`Current DPI: ${p.dpi[b]}`,g.appendChild(y)}}s.appendChild(g)}n.appendChild(s)}catch(t){console.log(t)}}async function j(e){E.includes(e)||(E.push(e),console.log(e),await O(new _(e,255)))}(async()=>{const e=await navigator.hid.getDevices();for(const n of e)B(n)&&await j(n)})();document.getElementById("select-button").onclick=async()=>{const e=await H();E.includes(e)||(console.log(e),await j(e))};
